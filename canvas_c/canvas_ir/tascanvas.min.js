/*! javascript_uglify 21-10-2015 */
function Box(){this.x=0,this.y=0,this.w=1,this.h=1,this.fill="#444444",this.fill_flg=!1,this.section_id="1",this.section_name="",this.crop_id=""}function Canvas(a,b){this.IP=a,this.CSS_path=b,this.data={},this.box_flg=!1,this.cursor_size=["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"],this.vsection_id="",this.vsection_name="",this.vcrop_id="",this.mdtool_select="select",this.vprocess_start_flag="N",this.vcurrURL_P="",this.vcapture_flag=!1,this.vget_data_flag=!1,this.vdiv_id="mg_kdiv_tt",this.vcapture_dataArr=[],this.vsave_single_data="Y",this.mark_flag=0,this.doc=null,this.canvas=null,this.boxes=[],this.vext=".jpg",this.selectionHandles=[],this.WIDTH=0,this.HEIGHT=0,this.ctx=null,this.INTERVAL=20,this.vbox_color="#ff0000",this.isDrag=!1,this.isResizeDrag=!1,this.expectResize=-1,this.mx=0,this.my=0,this.canvasValid=!1,this.mySel=null,this.mySelColor="#ff0000",this.mySelWidth=2,this.mySelBoxColor="#ff0000",this.mySelBoxSize=6,this.ghostcanvas=null,this.gctx=null,this.offsetx=0,this.offsety=0,this.stylePaddingLeft=0,this.stylePaddingTop=0,this.styleBorderLeft=0,this.styleBorderTop=0,this.vscroll_left=0,this.vscroll_top=0,this.tx=0,this.ty=0,this.tw=0,this.th=0,this.ts="1",this.tn="",this.tc="",this.vline_started=!1,this.vline_x1="",this.vline_y1="",this.new_sect_flg=!1,this.save_callback="",this.resizFlg=!1}var TASCanvas={};Box.prototype.constructor=Box,function(){this.draw=function(a,b){a.font="bold 13px arial",a.fillStyle="white",a.textAlign="right";var c=this.x+this.w;if(a.fillText(this.section_name,c,this.y-10),a===TASCanvas.gbl.gctx?a.fillStyle="black":(this.fill_flg?a.fillStyle=this.fill:a.fillStyle="rgba(255,255,255,0.2)",a.strokeStyle=this.fill),!(this.x>TASCanvas.gbl.WIDTH||this.y>TASCanvas.gbl.HEIGHT||this.x+this.w<0||this.y+this.h<0||(a.fillRect(this.x,this.y,this.w,this.h),a.strokeRect(this.x,this.y,this.w,this.h),TASCanvas.gbl.mySel!==this))){a.strokeStyle=TASCanvas.gbl.mySelColor,a.lineWidth=TASCanvas.gbl.mySelWidth,a.strokeRect(this.x,this.y,this.w,this.h),TASCanvas.gbl.tx=this.x,TASCanvas.gbl.ty=this.y,TASCanvas.gbl.tw=this.w,TASCanvas.gbl.th=this.h,TASCanvas.gbl.ts=this.section_id,TASCanvas.gbl.tn=this.section_name,TASCanvas.gbl.tc=this.crop_id;var d=TASCanvas.gbl.mySelBoxSize/2;TASCanvas.gbl.selectionHandles[0].x=this.x-d,TASCanvas.gbl.selectionHandles[0].y=this.y-d,TASCanvas.gbl.selectionHandles[1].x=this.x+this.w/2-d,TASCanvas.gbl.selectionHandles[1].y=this.y-d,TASCanvas.gbl.selectionHandles[2].x=this.x+this.w-d,TASCanvas.gbl.selectionHandles[2].y=this.y-d,TASCanvas.gbl.selectionHandles[3].x=this.x-d,TASCanvas.gbl.selectionHandles[3].y=this.y+this.h/2-d,TASCanvas.gbl.selectionHandles[4].x=this.x+this.w-d,TASCanvas.gbl.selectionHandles[4].y=this.y+this.h/2-d,TASCanvas.gbl.selectionHandles[6].x=this.x+this.w/2-d,TASCanvas.gbl.selectionHandles[6].y=this.y+this.h-d,TASCanvas.gbl.selectionHandles[5].x=this.x-d,TASCanvas.gbl.selectionHandles[5].y=this.y+this.h-d,TASCanvas.gbl.selectionHandles[7].x=this.x+this.w-d,TASCanvas.gbl.selectionHandles[7].y=this.y+this.h-d,a.fillStyle="#00ff00",a.strokeStyle=TASCanvas.gbl.mySelBoxColor;for(var e=0;8>e;e++){var f=TASCanvas.gbl.selectionHandles[e];a.fillRect(f.x,f.y,TASCanvas.gbl.mySelBoxSize,TASCanvas.gbl.mySelBoxSize),a.strokeRect(f.x,f.y,TASCanvas.gbl.mySelBoxSize,TASCanvas.gbl.mySelBoxSize)}TASCanvas.gbl.restore_section_id_new(TASCanvas.gbl.tx,TASCanvas.gbl.ty,TASCanvas.gbl.tw,TASCanvas.gbl.th,TASCanvas.gbl.ts,TASCanvas.gbl.tn)}}}.apply(Box.prototype),Canvas.prototype.constructor=Canvas,function(){this.Log=function(a){console.log(a)},this.init_body=function(a,b,c,d){this.mdtool_select=c,this.doc=a,this.save_callback=b,TASCanvas.gbl=this,this.runcanvas_mgnt();this.show_taxonomy_tree(d)},this.runcanvas_mgnt=function(){var a=this.doc.body,b=Math.max(Math.max(a.scrollHeight,this.doc.documentElement.scrollHeight),Math.max(a.offsetHeight,this.doc.documentElement.offsetHeight),Math.max(a.clientHeight,this.doc.documentElement.clientHeight)),c=Math.max(Math.max(a.scrollWidth,this.doc.documentElement.scrollWidth),Math.max(a.offsetWidth,this.doc.documentElement.offsetWidth),Math.max(a.clientWidth,this.doc.documentElement.clientWidth)),d=this.doc.getElementById(this.vdiv_id);null!==d&&this.EmptyElement(this.vdiv_id);var e=this.doc.createElement("div");e.setAttribute("id",this.vdiv_id);var f="position:absolute; top:0px; left:0px;";f+=" height:"+b+"px;",f+=" width:"+c+"px;",f+=" z-index:99999999996;",e.setAttribute("style",f),a.appendChild(e);var g=this.doc.createElement("canvas");g.setAttribute("id","canv_img_crop"),e.appendChild(g),g=this.doc.createElement("canvas"),g.setAttribute("id","canv_img"),g.setAttribute("width",c+"px"),g.setAttribute("height",b+"px"),f="position:absolute; top:0px; left:0px;background:#000000;opacity:0;",f+=" height:"+b+"px;",f+=" width:"+c+"px;",f+=" z-index:99999999997;",g.setAttribute("style",f),e.appendChild(g),g=this.doc.createElement("canvas"),g.setAttribute("id","imageView"),g.setAttribute("width",c+"px"),g.setAttribute("height",b+"px"),f="position:absolute; top:0px; left:0px;",f+=" height:"+b+"px;",f+=" width:"+c+"px;",f+=" z-index:99999999998;",g.setAttribute("style",f),e.appendChild(g),g=this.doc.createElement("canvas"),g.setAttribute("id","imageView_draw"),g.setAttribute("width",c+"px"),g.setAttribute("height",b+"px"),f="position:absolute; top:0px; left:0px;",f+=" height:"+b+"px;",f+=" width:"+c+"px;",f+=" z-index:99999999999;",g.setAttribute("style",f),e.appendChild(g),this.init2(),this.Clear_boxes(),this.vget_data_flag=!1,this.create_dynamic_divs()},this.myDownDiv=function(){TASCanvas.gbl.resizFlg=!0},this.myUpDiv=function(){TASCanvas.gbl.resizFlg=!1},this.myMoveDiv=function(a){if(TASCanvas.gbl.resizFlg){var b=a.pageX,c=a.pageY,d=parseInt(b)+31,e=parseInt(c)+31;TASCanvas.gbl.doc.getElementById("canv_img").style.width="",TASCanvas.gbl.doc.getElementById("imageView_draw").style.width="",TASCanvas.gbl.doc.getElementById("imageView").style.width="",TASCanvas.gbl.doc.getElementById("mgnt_dragger").style.left=b-20+"px",TASCanvas.gbl.getElementById("mgnt_dragger").style.top=c-17+"px";for(var f=1;4>f;f++){var g=this.doc.getElementsByTagName("canvas")[f];g.width=d-5,g.height=e-5}TASCanvas.gbl.doc.getElementById("canv_img").style.width=d-5+"px",TASCanvas.gbl.doc.getElementById("mg_kdiv_tt").style.width=d-5+"px",TASCanvas.gbl.doc.getElementById("imageView_draw").style.width=d-5+"px",TASCanvas.gbl.doc.getElementById("imageView").style.width=d-5+"px",TASCanvas.gbl.doc.getElementById("canv_img").style.height=e-5+"px",TASCanvas.gbl.doc.getElementById("mg_kdiv_tt").style.height=e-5+"px",TASCanvas.gbl.doc.getElementById("imageView_draw").style.height=e-5+"px",TASCanvas.gbl.doc.getElementById("imageView").style.height=e-5+"px"}},this.hide_popup_div=function(){this.doc.getElementById("pop_SaveCancel_div").style.display="none",this.doc.getElementById("profile_cat_div").style.display="none"},this.create_dynamic_divs=function(){this.new_sect_flg=!1,this.vcapture_flag=!0;var a=this.doc.getElementsByTagName("head")[0];c=this.doc.createElement("link"),c.id="link-target-finder-style",c.type="text/css",c.rel="stylesheet",c.href=this.IP+this.CSS_path+"wl_b.css",console.log(c.href),a.appendChild(c);var b=(this.doc.documentElement.clientHeight,this.doc.createElement("div"));b.setAttribute("id","pop_SaveCancel_div"),b.setAttribute("class","cs_pop_SaveCancel_div");var c="opacity:10;display:none;z-index:2147483647;";b.setAttribute("style",c);var d=this.doc.createElement("div");d.setAttribute("id","pop_right_div"),d.setAttribute("class","cs_pop_right_div");var e=this.doc.createElement("div");e.setAttribute("class","cs_SaveCancel_S"),c="width: 48px;background:url("+this.IP+this.CSS_path+"save.png) no-repeat center",e.setAttribute("style",c),e.setAttribute("title","Save");var f=this;e.onclick=function(){f.save_callback(f)};var g=this.doc.createElement("div");g.setAttribute("class","cs_SaveCancel_C"),c="background:url("+this.IP+this.CSS_path+"cancel.png) no-repeat center",g.setAttribute("title","Delete Selected Crop"),g.setAttribute("style",c),g.onclick=function(){TASCanvas.gbl.hide_popup_div(),TASCanvas.gbl.RemoveRect()};var h=this.doc.createElement("div");h.setAttribute("id","profile_disp_div"),h.setAttribute("class","cs_prfl_div"),d.appendChild(e),d.appendChild(g),d.appendChild(h),b.appendChild(d);var i=this.doc.getElementById(this.vdiv_id);i.appendChild(b)},this.EmptyElement=function(a){var b=this.doc.getElementById(a);b&&b.parentNode.removeChild(b)},this.init2=function(){this.canvas=this.doc.getElementById("imageView"),this.HEIGHT=this.canvas.height,this.WIDTH=this.canvas.width,this.ctx=this.canvas.getContext("2d"),this.canvas_draw=this.doc.getElementById("imageView_draw"),this.HEIGHT=this.canvas_draw.height,this.WIDTH=this.canvas_draw.width,this.ctx_draw=this.canvas_draw.getContext("2d"),this.ghostcanvas=this.doc.createElement("canvas"),this.ghostcanvas.height=this.HEIGHT,this.ghostcanvas.width=this.WIDTH,this.gctx=this.ghostcanvas.getContext("2d"),this.canvas.onselectstart=function(){return False},this.doc.defaultView&&this.doc.defaultView.getComputedStyle&&(this.stylePaddingLeft=parseInt(this.doc.defaultView.getComputedStyle(this.canvas,null).paddingLeft,10)||0,this.stylePaddingTop=parseInt(this.doc.defaultView.getComputedStyle(this.canvas,null).paddingTop,10)||0,this.styleBorderLeft=parseInt(this.doc.defaultView.getComputedStyle(this.canvas,null).borderLeftWidth,10)||0,this.styleBorderTop=parseInt(this.doc.defaultView.getComputedStyle(this.canvas,null).borderTopWidth,10)||0),setInterval(this.mainDraw,this.INTERVAL),this.canvas_draw.onmousedown=this.myDown_new,this.canvas_draw.onmouseup=this.myUp_new,this.canvas_draw.ondblclick=this.myDblClick_New,this.canvas_draw.onmousemove=this.myMove_new,this.canvas_draw.onclick=this.myClick;for(var a=0;8>a;a++){var b=new Box;this.selectionHandles.push(b)}},this.Getdwg_select_rect=function(){this.mdtool_select="select"},this.restore_section_id_new=function(a,b,c,d,e,f){this.doc_hght=this.doc.body.scrollHeight;var g=(this.doc_hght-b+45,this.doc.getElementById("pop_SaveCancel_div").offsetWidth,b-48);0>g&&(g=b+d),cat_y=g+d+50,cat_x=a+1,this.doc.getElementById("pop_SaveCancel_div").style.left=a+"px",this.doc.getElementById("pop_SaveCancel_div").style.top=g+"px",this.doc.getElementById("pop_SaveCancel_div").style.display="block",this.box_flg||(this.doc.getElementById("profile_cat_div").style.display="block",this.doc.getElementById("profile_cat_div").style.left=cat_x+"px",this.doc.getElementById("profile_cat_div").style.top=cat_y+"px"),""===f&&(f="Select Section")},this.restore_section_id=function(a,b,c,d,e,f){this.doc_hght=this.doc.body.scrollHeight,li_b=this.doc_hght-b+45,pky=b-48,li_x=a,li_y=b-60,pky<0&&(pky=b+d),this.doc.getElementById("pop_SaveCancel_div").style.left=a+"px",this.doc.getElementById("pop_SaveCancel_div").style.top=pky+"px",this.doc.getElementById("wl_div_section_user_master").style.left=li_x+"px",li_y<0?(li_y=pky+45,this.doc.getElementById("wl_div_section_user_master").style.top=li_y+"px",this.doc.getElementById("wl_div_section_user_master").style.bottom=""):(this.doc.getElementById("wl_div_section_user_master").style.bottom=li_b+"px",this.doc.getElementById("wl_div_section_user_master").style.top=""),this.doc.getElementById("pop_SaveCancel_div").style.display="block",this.doc.getElementById("wl_div_section_user_master").style.display="none";var g=this.doc.getElementById("div_section_user_master_text_span");f=""===f?"Select Section":"Edit Section",g.innerHTML=f},this.myDown=function(a){if(TASCanvas.gbl.getMouse(a),-1!==TASCanvas.gbl.expectResize)return TASCanvas.gbl.box_flg=!0,TASCanvas.gbl.doc.getElementById("profile_cat_div").style.display="none",void(TASCanvas.gbl.isResizeDrag=!0);TASCanvas.gbl.clear(TASCanvas.gbl.gctx);for(var b=TASCanvas.gbl.boxes.length,c=b-1;c>=0;c--){TASCanvas.gbl.boxes[c].draw(TASCanvas.gbl.gctx,"black");var d=TASCanvas.gbl.gctx.getImageData(TASCanvas.gbl.mx,TASCanvas.gbl.my,1,1);4*(TASCanvas.gbl.mx+TASCanvas.gbl.my*d.width);if(d.data[3]>0)return TASCanvas.gbl.mySel=TASCanvas.gbl.boxes[c],TASCanvas.gbl.offsetx=TASCanvas.gbl.mx-TASCanvas.gbl.mySel.x,TASCanvas.gbl.offsety=TASCanvas.gbl.my-TASCanvas.gbl.mySel.y,TASCanvas.gbl.mySel.x=TASCanvas.gbl.mx-TASCanvas.gbl.offsetx,TASCanvas.gbl.mySel.y=TASCanvas.gbl.my-TASCanvas.gbl.offsety,TASCanvas.gbl.vsection_id=TASCanvas.gbl.mySel.section_id,TASCanvas.gbl.vsection_name=TASCanvas.gbl.mySel.section_name,TASCanvas.gbl.vcrop_id=TASCanvas.gbl.mySel.crop_id,TASCanvas.gbl.isDrag=!0,TASCanvas.gbl.invalidate(),TASCanvas.gbl.clear(TASCanvas.gbl.gctx),void(""!==TASCanvas.gbl.vsection_id?TASCanvas.gbl.restore_section_id_new(TASCanvas.gbl.mySel.x,TASCanvas.gbl.mySel.y,TASCanvas.gbl.mySel.w,TASCanvas.gbl.mySel.h,TASCanvas.gbl.vsection_id,TASCanvas.gbl.vsection_name):TASCanvas.gbl.restore_section_id_new(TASCanvas.gbl.mySel.x,TASCanvas.gbl.mySel.y,TASCanvas.gbl.mySel.w,TASCanvas.gbl.mySel.h,"",""))}TASCanvas.gbl.mySel=null,TASCanvas.gbl.clear(TASCanvas.gbl.gctx),TASCanvas.gbl.invalidate()},this.myUp=function(){TASCanvas.gbl.isDrag=!1,TASCanvas.gbl.isResizeDrag=!1,TASCanvas.gbl.expectResize=-1},this.myDown_new=function(a){TASCanvas.gbl.Get_Scroll_Left_Top(),"select"==TASCanvas.gbl.mdtool_select?TASCanvas.gbl.myDown(a):"line_highlighter"==TASCanvas.gbl.mdtool_select?(TASCanvas.gbl.getMouse(a),TASCanvas.gbl.vline_started=!0,TASCanvas.gbl.vline_x1=TASCanvas.gbl.mx,TASCanvas.gbl.vline_y1=TASCanvas.gbl.my,this.style.cursor="crosshair"):"group_highlighter"==TASCanvas.gbl.mdtool_select&&(TASCanvas.gbl.getMouse(a),TASCanvas.gbl.vline_started=!0,TASCanvas.gbl.vline_x1=TASCanvas.gbl.mx,TASCanvas.gbl.vline_y1=TASCanvas.gbl.my,this.style.cursor="crosshair")},this.myUp_new=function(a){if(TASCanvas.gbl.box_flg=!1,"select"==TASCanvas.gbl.mdtool_select)TASCanvas.gbl.myUp(a);else if("line_highlighter"==TASCanvas.gbl.mdtool_select){if(TASCanvas.gbl.vline_started){TASCanvas.gbl.myMove_new(a);var b=20,c=10;b=TASCanvas.gbl.mx-vline_x1,TASCanvas.gbl.addRect(TASCanvas.gbl.vline_x1,TASCanvas.gbl.my-c/2,b,c,TASCanvas.gbl.vbox_color,!1,"","",""),this.style.cursor="auto",TASCanvas.gbl.vline_started=!1,TASCanvas.gbl.invalidate()}}else if("group_highlighter"==TASCanvas.gbl.mdtool_select&&TASCanvas.gbl.vline_started){TASCanvas.gbl.myMove_new(a),this.style.cursor="auto";var d=Math.min(TASCanvas.gbl.mx,TASCanvas.gbl.vline_x1),e=Math.min(TASCanvas.gbl.my,TASCanvas.gbl.vline_y1),f=Math.abs(TASCanvas.gbl.mx-TASCanvas.gbl.vline_x1),g=Math.abs(TASCanvas.gbl.my-TASCanvas.gbl.vline_y1);if(!f||!g)return void(TASCanvas.gbl.vline_started=!1);TASCanvas.gbl.addRect(d,e,f,g,TASCanvas.gbl.vbox_color,!1,"","","");var h=TASCanvas.gbl.boxes.length-1;TASCanvas.gbl.mySel=TASCanvas.gbl.boxes[h],TASCanvas.gbl.offsetx=TASCanvas.gbl.mx-TASCanvas.gbl.mySel.x,TASCanvas.gbl.offsety=TASCanvas.gbl.my-TASCanvas.gbl.mySel.y,TASCanvas.gbl.mySel.x=TASCanvas.gbl.mx-TASCanvas.gbl.offsetx,TASCanvas.gbl.mySel.y=TASCanvas.gbl.my-TASCanvas.gbl.offsety,TASCanvas.gbl.tx=d,TASCanvas.gbl.ty=e,TASCanvas.gbl.tw=f,TASCanvas.gbl.th=g,TASCanvas.gbl.ts=TASCanvas.gbl.vsection_id,TASCanvas.gbl.tn=TASCanvas.gbl.vsection_name,TASCanvas.gbl.ctx_draw.clearRect(0,0,TASCanvas.gbl.canvas_draw.width,TASCanvas.gbl.canvas_draw.height),this.style.cursor="auto",TASCanvas.gbl.vline_started=!1,TASCanvas.gbl.invalidate(),TASCanvas.gbl.restore_section_id_new(TASCanvas.gbl.tx,TASCanvas.gbl.ty,TASCanvas.gbl.tw,TASCanvas.gbl.th,"",""),TASCanvas.gbl.Getdwg_select_rect(),TASCanvas.gbl.mark_pick_Flg=!1}},this.myDblClick_New=function(a){TASCanvas.gbl.getMouse(a)},this.myMove_new=function(a){if(TASCanvas.gbl.Get_Scroll_Left_Top(),"select"==TASCanvas.gbl.mdtool_select)TASCanvas.gbl.myMove(a);else if("line_highlighter"==TASCanvas.gbl.mdtool_select){if(!TASCanvas.gbl.vline_started)return;TASCanvas.gbl.getMouse(a),TASCanvas.gbl.ctx.beginPath(),TASCanvas.gbl.ctx.moveTo(TASCanvas.gbl.vline_x1,TASCanvas.gbl.vline_y1),TASCanvas.gbl.ctx.lineTo(TASCanvas.gbl.mx,TASCanvas.gbl.vline_y1),TASCanvas.gbl.ctx.stroke(),TASCanvas.gbl.ctx.closePath()}else if("group_highlighter"==TASCanvas.gbl.mdtool_select){if(!TASCanvas.gbl.vline_started)return;TASCanvas.gbl.getMouse(a);var b=Math.min(TASCanvas.gbl.mx,TASCanvas.gbl.vline_x1),c=Math.min(TASCanvas.gbl.my,TASCanvas.gbl.vline_y1),d=Math.abs(TASCanvas.gbl.mx-TASCanvas.gbl.vline_x1),e=Math.abs(TASCanvas.gbl.my-TASCanvas.gbl.vline_y1);Math.max(TASCanvas.gbl.mx,TASCanvas.gbl.vline_x1),Math.max(TASCanvas.gbl.my,TASCanvas.gbl.vline_y1);if(TASCanvas.gbl.ctx_draw.clearRect(0,0,TASCanvas.gbl.canvas_draw.width,TASCanvas.gbl.canvas_draw.height),!d||!e)return;TASCanvas.gbl.ctx_draw.strokeStyle="rgba(255,0,0,1)",TASCanvas.gbl.ctx_draw.strokeRect(b,c,d,e)}},this.myMove=function(a){if(TASCanvas.gbl.isDrag)TASCanvas.gbl.getMouse(a),TASCanvas.gbl.mySel.x=TASCanvas.gbl.mx-TASCanvas.gbl.offsetx,TASCanvas.gbl.mySel.y=TASCanvas.gbl.my-TASCanvas.gbl.offsety,TASCanvas.gbl.invalidate();else if(TASCanvas.gbl.isResizeDrag){var b=TASCanvas.gbl.mySel.x,c=TASCanvas.gbl.mySel.y;switch(TASCanvas.gbl.expectResize){case 0:TASCanvas.gbl.mySel.x=TASCanvas.gbl.mx,TASCanvas.gbl.mySel.y=TASCanvas.gbl.my,TASCanvas.gbl.mySel.w+=b-TASCanvas.gbl.mx,TASCanvas.gbl.mySel.h+=c-TASCanvas.gbl.my;break;case 1:TASCanvas.gbl.mySel.y=TASCanvas.gbl.my,TASCanvas.gbl.mySel.h+=c-TASCanvas.gbl.my;break;case 2:TASCanvas.gbl.mySel.y=TASCanvas.gbl.my,TASCanvas.gbl.mySel.w=TASCanvas.gbl.mx-b,TASCanvas.gbl.mySel.h+=c-TASCanvas.gbl.my;break;case 3:TASCanvas.gbl.mySel.x=TASCanvas.gbl.mx,TASCanvas.gbl.mySel.w+=b-TASCanvas.gbl.mx;break;case 4:TASCanvas.gbl.mySel.w=TASCanvas.gbl.mx-b;break;case 5:TASCanvas.gbl.mySel.x=TASCanvas.gbl.mx,TASCanvas.gbl.mySel.w+=b-TASCanvas.gbl.mx,TASCanvas.gbl.mySel.h=TASCanvas.gbl.my-c;break;case 6:TASCanvas.gbl.mySel.h=TASCanvas.gbl.my-c;break;case 7:TASCanvas.gbl.mySel.w=TASCanvas.gbl.mx-b,TASCanvas.gbl.mySel.h=TASCanvas.gbl.my-c}TASCanvas.gbl.invalidate()}if(TASCanvas.gbl.getMouse(a),null!==TASCanvas.gbl.mySel&&!TASCanvas.gbl.isResizeDrag){for(var d=0;8>d;d++){var e=TASCanvas.gbl.selectionHandles[d];if(TASCanvas.gbl.mx>=e.x&&TASCanvas.gbl.mx<=e.x+TASCanvas.gbl.mySelBoxSize&&TASCanvas.gbl.my>=e.y&&TASCanvas.gbl.my<=e.y+TASCanvas.gbl.mySelBoxSize)return TASCanvas.gbl.expectResize=d,TASCanvas.gbl.invalidate(),void(TASCanvas.gbl.canvas_draw.style.cursor=TASCanvas.gbl.cursor_size[d])}TASCanvas.gbl.isResizeDrag=!1,TASCanvas.gbl.expectResize=-1,TASCanvas.gbl.canvas_draw.style.cursor="auto"}},this.myClick=function(a){},this.getMouse=function(a){var b=TASCanvas.gbl.canvas,c=0,d=0;if(b.offsetParent)do c+=b.offsetLeft,d+=b.offsetTop;while(b=b.offsetParent);c+=TASCanvas.gbl.stylePaddingLeft,d+=TASCanvas.gbl.stylePaddingTop,c+=TASCanvas.gbl.styleBorderLeft,d+=TASCanvas.gbl.styleBorderTop,TASCanvas.gbl.mx=a.pageX+TASCanvas.gbl.vscroll_left-c,TASCanvas.gbl.my=a.pageY+TASCanvas.gbl.vscroll_top-d,TASCanvas.gbl.Get_Scroll_Left_Top()},this.Get_Scroll_Left_Top=function(){var a=this.doc.getElementById(this.vdiv_id);this.vscroll_left=a.scrollLeft,this.vscroll_top=a.scrollTop},this.addRect=function(a,b,c,d,e,f,g,h,i){var j=new Box;j.x=a,j.y=b,j.w=c,j.h=d,j.fill=e,j.fill_flg=f,j.section_id=g,j.section_name=h,j.crop_id=i,this.boxes.push(j),this.invalidate()},this.getSelectedCord=function(){var a=this.tx+"_"+this.ty+"_"+this.tw+"_"+this.th;return a},this.getSelectedCord_single=function(){var a=this.tx+"_"+this.ty+"_"+this.tw+"_"+this.th,b=a.split("_"),c=this.get_intersected_indxs(b),d="section_id="+this.ts+"&crop_cord="+a+"&"+c;return d},this.getSelectedCord_undo=function(){var a=this.tx+":^^:"+this.ty+":^^:"+this.tw+":^^:"+this.th+":^^:"+this.ts+":^^:"+this.tn+":^^:"+this.tc;return a},this.Clear_boxes=function(){this.boxes=[],this.tx=0,this.ty=0,this.tw=0,this.th=0,this.ts="1",this.tn="",this.tc="",this.invalidate()},this.GetCord_Data_All=function(){for(var a,b,c,d=[],e=0;e<this.boxes.length;e++)if(this.boxes[e].fill==this.vbox_color&&""!==this.boxes[e].x){a=this.boxes[e].x+"_"+this.boxes[e].y+"_"+this.boxes[e].w+"_"+this.boxes[e].h,b=a.split("_"),c=this.get_intersected_indxs(b);var f=JSON.parse(JSON.stringify({cord:a,section_id:this.boxes[e].section_id,dom_sign:c}));d.push(f)}return d},this.addRect_selection=function(a,b,c,d){this.ctx_draw.fillStyle="rgba(200,200,200,0.2)",this.ctx_draw.strokeStyle="rgba(255,255,0,0.4)",this.ctx_draw.fillRect(a,b,c,d),this.ctx_draw.strokeRect(a,b,c,d)},this.mySearch_Clear=function(){this.ctx_draw.clearRect(0,0,this.canvas_draw.width,this.canvas_draw.height)},this.getSelectedCord_Delete=function(){var a=this.tx+"_"+this.ty+"_"+this.tw+"_"+this.th+"_"+this.tc;return a},this.RemoveRect=function(){for(var a="",b=[],c=this.getSelectedCord_Delete(),d=0;d<this.boxes.length;d++){var e=this.boxes[d].x+"_"+this.boxes[d].y+"_"+this.boxes[d].w+"_"+this.boxes[d].h+"_"+this.boxes[d].crop_id,f=this.boxes[d];this.boxes[d].fill==this.vbox_color&&(e==c?a=this.boxes[d].crop_id:b.push(f))}this.boxes=b,this.invalidate(),this.Getdwg_select_Group_Highlighter_mgnt()},this.update_section_id=function(a,b){for(var c=this.getSelectedCord(),d=0;d<this.boxes.length;d++){var e=this.boxes[d].x+"_"+this.boxes[d].y+"_"+this.boxes[d].w+"_"+this.boxes[d].h;if(this.boxes[d].fill==this.vbox_color&&e==c){this.boxes[d].section_id=a,this.boxes[d].section_name=b,this.ts=a,this.tn=b;break}}this.invalidate(),this.mainDraw()},this.update_crop_id=function(a){for(var b=this.getSelectedCord(),c=0;c<this.boxes.length;c++){var d=this.boxes[c].x+"_"+this.boxes[c].y+"_"+this.boxes[c].w+"_"+this.boxes[c].h;if(this.boxes[c].fill==this.vbox_color&&d==b){this.boxes[c].crop_id=a,tc=a;break}}this.invalidate(),this.mainDraw()},this.invalidate=function(){this.canvasValid=!1},this.mainDraw=function(){if(!TASCanvas.gbl.canvasValid){TASCanvas.gbl.clear(TASCanvas.gbl.ctx);for(var a=TASCanvas.gbl.boxes.length,b=0;a>b;b++)TASCanvas.gbl.boxes[b].draw(TASCanvas.gbl.ctx);TASCanvas.gbl.canvasValid=!0}},this.clear=function(a){try{a.clearRect(0,0,this.WIDTH,this.HEIGHT)}catch(b){this.Log("============="+b)}},this.show_footer=function(a,b){this.doc.getElementById("pop_SaveCancel_div").style.display="block",this.doc.getElementById("profile_cat_div").style.display="block",this.doc.getElementById("pop_SaveCancel_div").style.left="10px",this.doc.getElementById("pop_SaveCancel_div").style.top=b},this.Getdwg_select_Group_Highlighter_mgnt=function(a){void 0!==a&&(this.k_row_id=a),this.vcapture_flag||this.runcanvas_mgnt(),this.mdtool_select="group_highlighter"},this.scrollingMove=function(a,b,c,d){var e=this.doc.getElementById(this.vdiv_id);(c||d)&&(this.scrollTopHeight=this.doc.getElementById(this.vdiv_id).scrollTop,this.scrollLeftwidth=this.doc.getElementById(this.vdiv_id).scrollLeft,c>e.offsetWidth-25&&(this.doc.getElementById(this.vdiv_id).scrollLeft=3+this.scrollLeftwidth),d>e.offsetHeight-25&&(this.doc.getElementById(this.vdiv_id).scrollTop=3+this.scrollTopHeight))},this.select_taxonomy=function(a,b){this.taxo_id=Number(a.getAttribute("taxo_id")),this.taxo_name=a.textContent,this.doc.getElementById("profile_disp_div").innerHTML=a.textContent},this.createDOM=function(a,b,c){var d=c.ownerDocument.createElement(a);return this.setAttr(d,b),c.appendChild(d),d},this.setAttr=function(a,b){"txt"in b&&(a.innerHTML=b.txt,delete b.txt);for(var c in b)a.setAttribute(c,b[c])},this.show_taxonomy_tree=function(a){var b=this.doc.getElementById(this.vdiv_id);if(b){var c=this.doc.getElementById("profile_cat_div")||this.createDOM("div",{id:"profile_cat_div","class":"cs_prfl_cate_div",style:"display:none"},b);c.innerHTML="";var d=this.createDOM("ul",{},c),e=this;a.forEach(function(a,b){var c=e.createDOM("li",{id:"1_prfl_"+a[0],taxo_id:a[0],"class":"cs_div_section_user_master_li",txt:a[1]},d);c.onclick=function(a){e.select_taxonomy(this,a)}})}}}.apply(Canvas.prototype);
